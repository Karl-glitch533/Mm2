-- Vanxell Hub for Murder Mystery 2
-- Auto Collect Candy, Identify Murderer/Sheriff, Auto-Shoot, Grab Gun
-- Created by [Your Name or Team]

local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Create GUI
local VanxellHub = Instance.new("ScreenGui", PlayerGui)
VanxellHub.Name = "VanxellHub"
local MainFrame = Instance.new("Frame", VanxellHub)
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
MainFrame.Name = "MainFrame"

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.Text = "Vanxell Hub - MM2 Features"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.TextScaled = true

-- Buttons
local AutoCandyButton = Instance.new("TextButton", MainFrame)
AutoCandyButton.Size = UDim2.new(0.9, 0, 0, 40)
AutoCandyButton.Position = UDim2.new(0.05, 0, 0.2, 0)
AutoCandyButton.Text = "Toggle Auto Candy"
AutoCandyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AutoCandyButton.TextColor3 = Color3.fromRGB(255, 255, 255)

local IdentifyButton = Instance.new("TextButton", MainFrame)
IdentifyButton.Size = UDim2.new(0.9, 0, 0, 40)
IdentifyButton.Position = UDim2.new(0.05, 0, 0.35, 0)
IdentifyButton.Text = "Identify Murderer/Sheriff"
IdentifyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
IdentifyButton.TextColor3 = Color3.fromRGB(255, 255, 255)

local AutoShootButton = Instance.new("TextButton", MainFrame)
AutoShootButton.Size = UDim2.new(0.9, 0, 0, 40)
AutoShootButton.Position = UDim2.new(0.05, 0, 0.5, 0)
AutoShootButton.Text = "Toggle Auto-Shoot"
AutoShootButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AutoShootButton.TextColor3 = Color3.fromRGB(255, 255, 255)

local GrabGunButton = Instance.new("TextButton", MainFrame)
GrabGunButton.Size = UDim2.new(0.9, 0, 0, 40)
GrabGunButton.Position = UDim2.new(0.05, 0, 0.65, 0)
GrabGunButton.Text = "Grab Gun"
GrabGunButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
GrabGunButton.TextColor3 = Color3.fromRGB(255, 255, 255)

local CloseButton = Instance.new("TextButton", MainFrame)
CloseButton.Size = UDim2.new(0.9, 0, 0, 40)
CloseButton.Position = UDim2.new(0.05, 0, 0.8, 0)
CloseButton.Text = "Close GUI"
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Functions
local AutoCandy = false
AutoCandyButton.MouseButton1Click:Connect(function()
    AutoCandy = not AutoCandy
    AutoCandyButton.Text = AutoCandy and "Auto Candy: ON" or "Auto Candy: OFF"
    if AutoCandy then
        while AutoCandy do
            for _, candy in pairs(workspace:GetChildren()) do
                if candy:IsA("Part") and candy.Name == "Candy" then
                    Player.Character.HumanoidRootPart.CFrame = candy.CFrame
                    wait(0.1) -- Adjust delay as needed
                end
            end
            wait(0.5) -- Adjust as needed
        end
    end
end)

local function identifyRoles()
    for _, player in pairs(game.Players:GetPlayers()) do
        local role = player.Backpack:FindFirstChild("Knife") and "Murderer" or (player.Backpack:FindFirstChild("Gun") and "Sheriff" or nil)
        if role then
            local highlight = Instance.new("BillboardGui", player.Character)
            highlight.Adornee = player.Character:FindFirstChild("Head")
            highlight.Size = UDim2.new(0, 50, 0, 50)
            highlight.StudsOffset = Vector3.new(0, 2, 0)
            local label = Instance.new("TextLabel", highlight)
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.Text = role == "Murderer" and "ðŸ”´" or "ðŸ”µ"
            label.TextColor3 = role == "Murderer" and Color3.fromRGB(255, 0, 0) or Color3.fromRGB(0, 0, 255)
            label.TextScaled = true
        end
    end
end
IdentifyButton.MouseButton1Click:Connect(identifyRoles)

local AutoShoot = false
AutoShootButton.MouseButton1Click:Connect(function()
    AutoShoot = not AutoShoot
    AutoShootButton.Text = AutoShoot and "Auto-Shoot: ON" or "Auto-Shoot: OFF"
    if AutoShoot and Player.Backpack:FindFirstChild("Gun") then
        local gun = Player.Backpack:FindFirstChild("Gun")
        local murderer
        for _, plr in pairs(game.Players:GetPlayers()) do
            if plr.Backpack:FindFirstChild("Knife") then
                murderer = plr
                break
            end
        end
        if murderer then
            while AutoShoot and gun do
                gun.Parent = Player.Character
                Player.Character.HumanoidRootPart.CFrame = murderer.Character.HumanoidRootPart.CFrame
                gun:Activate()
                wait(0.1)
            end
        end
    end
end)

GrabGunButton.MouseButton1Click:Connect(function()
    for _, item in pairs(workspace:GetChildren()) do
        if item:IsA("Tool") and item.Name == "Gun" then
            Player.Character.HumanoidRootPart.CFrame = item.Handle.CFrame
            break
        end
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    VanxellHub.Enabled = false
end)

-- GUI Toggle Button
local OpenGuiButton = Instance.new("TextButton", PlayerGui)
OpenGuiButton.Size = UDim2.new(0.1, 0, 0.05, 0)
OpenGuiButton.Position = UDim2.new(0, 0, 0.9, 0)
OpenGuiButton.Text = "Open GUI"
OpenGuiButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
OpenGuiButton.TextColor3 = Color3.fromRGB(0, 0, 0)

OpenGuiButton.MouseButton1Click:Connect(function()
    VanxellHub.Enabled = true
end)
